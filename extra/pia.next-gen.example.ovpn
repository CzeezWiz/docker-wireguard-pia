; Example .ovpn for PIA next-gen network. Based on pia.ovpn generated by the Windows desktop app: C:\Program Files\Private Internet Access\data\pia.conf
; Only briefly tested on Windows at this stage. YMMV.

; Old style port-forwarding will no longer work. (pf.sh might work though? Need to test)

; This appears to be specific to the version of OpenVPN bundled with the PIA app, and doesn't work with stock. (What does it do?)
; pia-signal-settings

; We get an 'AEAD Decrypt error: cipher final failed' error without adding this (why?)
ncp-disable

; Only needed for debugging
; verb 4

client
dev tun
proto udp
explicit-exit-notify

; Desktop app pulls ip/port/cname from here: https://serverlist.piaservers.net/vpninfo/servers/new
remote 212.102.37.136 8080
verify-x509-name zurich403 name

ping 5
ping-exit 25
persist-remote-ip
resolv-retry 0
route-delay 0
reneg-sec 0
server-poll-timeout 10s
tls-client
tls-exit
remote-cert-tls server

; The PIA app uses(?) an auth token (first half as username, second half as password) instead of the account username/password, however the account user/pass appears to still be accepted.
; An auth token can either be self generated using something like curl, or taken directly from the desktop app: C:\Program Files\Private Internet Access\data\account.json
auth-user-pass

pull-filter ignore "auth-token"
sndbuf 262144
rcvbuf 262144
redirect-gateway def1 bypass-dhcp
nobind

; Desktop app offers AES-128/256-GCM/CBC
cipher AES-256-GCM

pull-filter ignore "dhcp-option DNS "
pull-filter ignore "dhcp-option DOMAIN local"

; rsa_2048.crt (used by default in the app) needs the bundled PIA version of OpenVPN to work?
; default.crt seems to work with stock: https://github.com/pia-foss/desktop/tree/master/daemon/res/ca/default.crt
<ca>
-----BEGIN CERTIFICATE-----
MIID2jCCA0OgAwIBAgIJAOtqMkR2JSXrMA0GCSqGSIb3DQEBBQUAMIGlMQswCQYD
VQQGEwJVUzELMAkGA1UECBMCT0gxETAPBgNVBAcTCENvbHVtYnVzMSAwHgYDVQQK
ExdQcml2YXRlIEludGVybmV0IEFjY2VzczEjMCEGA1UEAxMaUHJpdmF0ZSBJbnRl
cm5ldCBBY2Nlc3MgQ0ExLzAtBgkqhkiG9w0BCQEWIHNlY3VyZUBwcml2YXRlaW50
ZXJuZXRhY2Nlc3MuY29tMB4XDTEwMDgyMTE4MjU1NFoXDTIwMDgxODE4MjU1NFow
gaUxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJPSDERMA8GA1UEBxMIQ29sdW1idXMx
IDAeBgNVBAoTF1ByaXZhdGUgSW50ZXJuZXQgQWNjZXNzMSMwIQYDVQQDExpQcml2
YXRlIEludGVybmV0IEFjY2VzcyBDQTEvMC0GCSqGSIb3DQEJARYgc2VjdXJlQHBy
aXZhdGVpbnRlcm5ldGFjY2Vzcy5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJ
AoGBAOlVlkHcxfN5HAswpryG7AN9CvcvVzcXvSEo91qAl/IE8H0knKZkIAhe/z3m
hz0t91dBHh5yfqwrXlGiyilplVB9tfZohvcikGF3G6FFC9j40GKP0/d22JfR2vJt
4/5JKRBlQc9wllswHZGmPVidQbU0YgoZl00bAySvkX/u1005AgMBAAGjggEOMIIB
CjAdBgNVHQ4EFgQUl8qwY2t+GN0pa/wfq+YODsxgVQkwgdoGA1UdIwSB0jCBz4AU
l8qwY2t+GN0pa/wfq+YODsxgVQmhgaukgagwgaUxCzAJBgNVBAYTAlVTMQswCQYD
VQQIEwJPSDERMA8GA1UEBxMIQ29sdW1idXMxIDAeBgNVBAoTF1ByaXZhdGUgSW50
ZXJuZXQgQWNjZXNzMSMwIQYDVQQDExpQcml2YXRlIEludGVybmV0IEFjY2VzcyBD
QTEvMC0GCSqGSIb3DQEJARYgc2VjdXJlQHByaXZhdGVpbnRlcm5ldGFjY2Vzcy5j
b22CCQDrajJEdiUl6zAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAByH
atXgZzjFO6qctQWwV31P4qLelZzYndoZ7olY8ANPxl7jlP3YmbE1RzSnWtID9Gge
fsKHi1jAS9tNP2E+DCZiWcM/5Y7/XKS/6KvrPQT90nM5klK9LfNvS+kFabMmMBe2
llQlzAzFiIfabACTQn84QLeLOActKhK8hFJy2Gy6
-----END CERTIFICATE-----
</ca>
